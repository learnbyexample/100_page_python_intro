<!doctypehtml><html class="sidebar-visible no-js light"lang=en><head><meta charset=UTF-8><title>Dealing with files - 100 Page Python Intro</title><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta content="Short, introductory guide for the Python programming language"name=description><meta content=width=device-width,initial-scale=1 name=viewport><meta content=#ffffff name=theme-color><meta content="100 Page Python Intro"property=og:title><meta content=website property=og:type><meta content="Short, introductory guide for the Python programming language"property=og:description><meta content=https://learnbyexample.github.io/100_page_python_intro/ property=og:url><meta content=https://raw.githubusercontent.com/learnbyexample/100_page_python_intro/main/images/py_intro_ls.png property=og:image><meta content=1280 property=og:image:width><meta content=720 property=og:image:height><meta content=summary_large_image property=twitter:card><meta content=@learn_byexample property=twitter:site><link href=favicon.svg rel=icon><link rel="shortcut icon"href=favicon.png><link href=css/variables.css rel=stylesheet><link href=css/general.css rel=stylesheet><link href=css/chrome.css rel=stylesheet><link href=FontAwesome/css/font-awesome.css rel=stylesheet><link href=fonts/fonts.css rel=stylesheet><link href=highlight.css rel=stylesheet><link href=tomorrow-night.css rel=stylesheet><link href=ayu-highlight.css rel=stylesheet><link href=style.css rel=stylesheet><body><script>var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";</script><script>try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }</script><script>var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');</script><script>var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);</script><nav aria-label="Table of contents"class=sidebar id=sidebar><div class=sidebar-scrollbox><ol class=chapter><li class="chapter-item expanded affix"><a href=cover.html>Cover</a><li class="chapter-item expanded affix"><a href=buy.html>Buy PDF/EPUB versions</a><li class="chapter-item expanded"><a href=preface.html><strong aria-hidden=true>1.</strong> Preface</a><li class="chapter-item expanded"><a href=introduction.html><strong aria-hidden=true>2.</strong> Introduction</a><li class="chapter-item expanded"><a href=numeric-data-types.html><strong aria-hidden=true>3.</strong> Numeric data types</a><li class="chapter-item expanded"><a href=strings-and-user-input.html><strong aria-hidden=true>4.</strong> Strings and user input</a><li class="chapter-item expanded"><a href=defining-functions.html><strong aria-hidden=true>5.</strong> Defining functions</a><li class="chapter-item expanded"><a href=control-structures.html><strong aria-hidden=true>6.</strong> Control structures</a><li class="chapter-item expanded"><a href=importing-and-creating-modules.html><strong aria-hidden=true>7.</strong> Importing and creating modules</a><li class="chapter-item expanded"><a href=installing-modules-and-virtual-environments.html><strong aria-hidden=true>8.</strong> Installing modules and Virtual environments</a><li class="chapter-item expanded"><a href=exception-handling.html><strong aria-hidden=true>9.</strong> Exception handling</a><li class="chapter-item expanded"><a href=debugging.html><strong aria-hidden=true>10.</strong> Debugging</a><li class="chapter-item expanded"><a href=testing.html><strong aria-hidden=true>11.</strong> Testing</a><li class="chapter-item expanded"><a href=tuple-and-sequence-operations.html><strong aria-hidden=true>12.</strong> Tuple and Sequence operations</a><li class="chapter-item expanded"><a href=list.html><strong aria-hidden=true>13.</strong> List</a><li class="chapter-item expanded"><a href=mutability.html><strong aria-hidden=true>14.</strong> Mutability</a><li class="chapter-item expanded"><a href=dict.html><strong aria-hidden=true>15.</strong> Dict</a><li class="chapter-item expanded"><a href=set.html><strong aria-hidden=true>16.</strong> Set</a><li class="chapter-item expanded"><a href=text-processing.html><strong aria-hidden=true>17.</strong> Text processing</a><li class="chapter-item expanded"><a href=comprehensions-and-generator-expressions.html><strong aria-hidden=true>18.</strong> Comprehensions and Generator expressions</a><li class="chapter-item expanded"><a class=active href=dealing-with-files.html><strong aria-hidden=true>19.</strong> Dealing with files</a><li class="chapter-item expanded"><a href=executing-external-commands.html><strong aria-hidden=true>20.</strong> Executing external commands</a><li class="chapter-item expanded"><a href=command-line-arguments.html><strong aria-hidden=true>21.</strong> Command line arguments</a></li><br><hr><li class="chapter-item expanded"><i class="fa fa-github"id=git-repository-button></i><a href=https://github.com/learnbyexample/100_page_python_intro>   Source code</a><li class="chapter-item expanded"><i class="fa fa-home"id=home-button></i><a href=https://learnbyexample.github.io/>   My Blog</a><li class="chapter-item expanded"><i class="fa fa-book"id=book-button></i><a href=https://learnbyexample.github.io/books/>   My Books</a><li class="chapter-item expanded"><i class="fa fa-envelope"id=mail-button></i><a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>   learnbyexample weekly</a><li class="chapter-item expanded"><i class="fa fa-twitter"id=twitter-button></i><a href=https://twitter.com/learn_byexample>   Twitter</a></ol></div><div class=sidebar-resize-handle id=sidebar-resize-handle></div></nav><div class=page-wrapper id=page-wrapper><div class=page><div id=menu-bar-hover-placeholder></div><div class="menu-bar sticky bordered"id=menu-bar><div class=left-buttons><button aria-label="Toggle Table of Contents"title="Toggle Table of Contents"aria-controls=sidebar class=icon-button id=sidebar-toggle type=button><i class="fa fa-bars"></i></button><button aria-label="Change theme"title="Change theme"aria-controls=theme-list aria-expanded=false aria-haspopup=true class=icon-button id=theme-toggle type=button><i class="fa fa-paint-brush"></i></button><ul aria-label=Themes class=theme-popup id=theme-list role=menu><li role=none><button class=theme id=light role=menuitem>Light (default)</button><li role=none><button class=theme id=rust role=menuitem>Rust</button><li role=none><button class=theme id=coal role=menuitem>Coal</button><li role=none><button class=theme id=navy role=menuitem>Navy</button><li role=none><button class=theme id=ayu role=menuitem>Ayu</button></ul><button aria-label="Toggle Searchbar"title="Search. (Shortkey: s)"aria-controls=searchbar aria-expanded=false aria-keyshortcuts=S class=icon-button id=search-toggle type=button><i class="fa fa-search"></i></button></div><h1 class=menu-title>100 Page Python Intro</h1><div class=right-buttons><a aria-label=Blog href=https://learnbyexample.github.io title=Blog> <i class="fa fa-home"id=home-button></i> </a><a aria-label=Twitter href=https://twitter.com/learn_byexample title=Twitter> <i class="fa fa-twitter"id=twitter-button></i> </a><a aria-label="Git repository"title="Git repository"href=https://github.com/learnbyexample/100_page_python_intro> <i class="fa fa-github"id=git-repository-button></i> </a></div></div><div class=hidden id=search-wrapper><form class=searchbar-outer id=searchbar-outer><input placeholder="Search this book ..."aria-controls=searchresults-outer aria-describedby=searchresults-header id=searchbar name=searchbar type=search></form><div class="searchresults-outer hidden"id=searchresults-outer><div class=searchresults-header id=searchresults-header></div><ul id=searchresults></ul></div></div><script>document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });</script><div class=content id=content><main><div class=sidetoc><nav class=pagetoc></nav></div><h1 id=dealing-with-files><a class=header href=#dealing-with-files>Dealing with files</a></h1><p>This chapter will discuss the <code>open()</code> built-in function and introduce some of the built-in modules for file processing.<h2 id=open-and-close><a class=header href=#open-and-close>open and close</a></h2><p>The <a href=https://docs.python.org/3/library/functions.html#open>open()</a> built-in function is one of the ways to read and write files. The first argument to this function is the filename (relative or absolute path) to be processed. Rest are keyword arguments that you can configure. The output is a <code>TextIOWrapper</code> object (filehandle), which you can use as an iterator. Here's an example:<pre><code class=language-python># default mode is rt (read text)
>>> fh = open('ip.txt')
>>> fh
<_io.TextIOWrapper name='ip.txt' mode='r' encoding='UTF-8'>
>>> next(fh)
'hi there\n'
>>> next(fh)
'today is sunny\n'
>>> next(fh)
'have a nice day\n'
>>> next(fh)
Traceback (most recent call last):
  File "&LTpython-input-5>", line 1, in &LTmodule>
    next(fh)
    ~~~~^^^^
StopIteration

# check if the filehandle is active or closed
>>> fh.closed
False
# close the filehandle
>>> fh.close()
>>> fh.closed
True
</code></pre><p>The <code>mode</code> argument specifies what kind of processing you want. Only the <code>text</code> mode will be covered in this chapter, which is the default. You can combine options — for example, <code>rb</code> means <code>read</code> in <code>binary</code> mode. Here are the relevant details from the documentation:<ul><li><code>r</code> open for reading (default)<li><code>w</code> open for writing, truncating the file first<li><code>x</code> open for exclusive creation, failing if the file already exists<li><code>a</code> open for writing, appending to the end of the file if it exists<li><code>b</code> binary mode<li><code>t</code> text mode (default)<li><code>+</code> open for updating (reading and writing)</ul><p>The <code>encoding</code> argument is meaningful only in the <code>text</code> mode. You can check the default encoding for your environment using the <a href=https://docs.python.org/3/library/locale.html>locale</a> module as shown below. See <a href=https://docs.python.org/3/library/codecs.html#standard-encodings>docs.python: standard encodings</a> and <a href=https://docs.python.org/3/howto/unicode.html>docs.python HOWTOs: Unicode</a> for more details.<pre><code class=language-python>>>> import locale
>>> locale.getpreferredencoding()
'UTF-8'
</code></pre><p>Here's how Python handles line separation by default, see documentation for more details.<blockquote><p>When reading input from the stream, if <code>newline</code> is <code>None</code>, universal newlines mode is enabled. Lines in the input can end in <code>'\n'</code>, <code>'\r'</code>, or <code>'\r\n'</code>, and these are translated into <code>'\n'</code> before being returned to the caller.</blockquote><blockquote><p>When writing output to the stream, if <code>newline</code> is <code>None</code>, any <code>'\n'</code> characters written are translated to the system default line separator, <code>os.linesep</code>.</blockquote><p>If the given filename doesn't exist, you'll get a <code>FileNotFoundError</code> exception.<pre><code class=language-python>>>> open('xyz.txt', mode='r', encoding='ascii')
Traceback (most recent call last):
  File "&LTpython-input-0>", line 1, in &LTmodule>
    open('xyz.txt', mode='r', encoding='ascii')
    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] No such file or directory: 'xyz.txt'
</code></pre><h2 id=context-manager><a class=header href=#context-manager>Context manager</a></h2><p>Quoting from <a href=https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files>docs.python: Reading and Writing Files</a>:<blockquote><p>It is good practice to use the <code>with</code> keyword when dealing with file objects. The advantage is that the file is properly closed after its suite finishes, even if an exception is raised at some point. Using <code>with</code> is also much shorter than writing equivalent <code>try-finally</code> blocks.</blockquote><p>Here's an example:<pre><code class=language-python># read_file.py
with open('ip.txt', mode='r', encoding='ascii') as f:
    for ip_line in f:
        op_line = ip_line.rstrip('\n').capitalize() + '.'
        print(op_line)
</code></pre><p>Recall that <code>as</code> keyword was seen before in the <a href=./importing-and-creating-modules.html#different-ways-of-importing>Different ways of importing</a> and <a href=./exception-handling.html#try-except>try-except</a> sections. Here's the output of the above program:<pre><code class=language-bash>$ python3.13 read_file.py
Hi there.
Today is sunny.
Have a nice day.
</code></pre><blockquote><p><img alt=info src=./images/info.svg> See <a href=https://towardsdatascience.com/the-magic-of-python-context-managers-adb92ace1dd0>The Magic of Python Context Managers</a> for more examples and details.</blockquote><h2 id=read-readline-and-readlines><a class=header href=#read-readline-and-readlines>read, readline and readlines</a></h2><p>The <code>read()</code> method gives you the entire remaining contents of the file as a single string. The <code>readline()</code> method gives the next line of text and <code>readlines()</code> gives all the remaining lines as a <code>list</code> of strings.<pre><code class=language-python>>>> open('ip.txt').read()
'hi there\ntoday is sunny\nhave a nice day\n'

>>> fh = open('ip.txt')
# readline() is similar to next()
# but returns empty string instead of StopIteration exception
>>> fh.readline()
'hi there\n'
>>> fh.readlines()
['today is sunny\n', 'have a nice day\n']
>>> fh.readline()
''
</code></pre><h2 id=write><a class=header href=#write>write</a></h2><pre><code class=language-python># write_file.py
with open('op.txt', mode='w', encoding='ascii') as f:
    f.write('this is a sample line of text\n')
    f.write('yet another line\n')
</code></pre><p>You can call the <code>write()</code> method on a filehandle to add contents to that file (provided the <code>mode</code> you have set supports writing). Unlike <code>print()</code>, the <code>write()</code> method doesn't automatically add newline characters.<pre><code class=language-bash>$ python3.13 write_file.py

$ cat op.txt
this is a sample line of text
yet another line

$ file op.txt
op.txt: ASCII text
</code></pre><blockquote><p><img alt=warning src=./images/warning.svg> If the file already exists, the <code>w</code> mode will overwrite the contents (i.e. any existing content will be lost).</blockquote><p>You can also use the <code>print()</code> function for writing by passing the filehandle to the <code>file</code> keyword argument. The <a href=https://docs.python.org/3/library/fileinput.html>fileinput module</a> supports in-place editing and other features (see the <a href=./command-line-arguments.html#in-place-editing-with-fileinput>In-place editing with fileinput</a> section for examples).<h2 id=file-processing-modules><a class=header href=#file-processing-modules>File processing modules</a></h2><p>This section gives introductory examples for some of the built-in modules that are handy for file processing. Quoting from <a href=https://docs.python.org/3/library/os.html>docs.python: os</a>:<blockquote><p>This module provides a portable way of using operating system dependent functionality.</blockquote><pre><code class=language-python>>>> import os

# current working directory
>>> os.getcwd()
'/home/learnbyexample/Python/programs/'

# value of an environment variable
>>> os.getenv('SHELL')
'/bin/bash'

# file size
>>> os.stat('ip.txt').st_size
40

# check if the given path is a file
>>> os.path.isfile('ip.txt')
True
</code></pre><p>Quoting from <a href=https://docs.python.org/3/library/glob.html>docs.python: glob</a>:<blockquote><p>The glob module finds all the pathnames matching a specified pattern according to the rules used by the Unix shell, although results are returned in arbitrary order. No tilde expansion is done, but <code>*</code>, <code>?</code>, and character ranges expressed with <code>[]</code> will be correctly matched.</blockquote><pre><code class=language-python>>>> import glob

# list of files (including directories) containing '_file' in their name
>>> glob.glob('*_file*')
['read_file.py', 'write_file.py']
</code></pre><p>Quoting from <a href=https://docs.python.org/3/library/shutil.html>docs.python: shutil</a>:<blockquote><p>The <code>shutil</code> module offers a number of high-level operations on files and collections of files. In particular, functions are provided which support file copying and removal.</blockquote><pre><code class=language-python>>>> import shutil

>>> shutil.copy('ip.txt', 'ip_file.txt')
'ip_file.txt'
>>> glob.glob('*_file*')
['read_file.py', 'ip_file.txt', 'write_file.py']
</code></pre><p>Quoting from <a href=https://docs.python.org/3/library/pathlib.html>docs.python: pathlib</a>:<blockquote><p>This module offers classes representing filesystem paths with semantics appropriate for different operating systems. Path classes are divided between pure paths, which provide purely computational operations without I/O, and concrete paths, which inherit from pure paths but also provide I/O operations.</blockquote><pre><code class=language-python>>>> from pathlib import Path

# use 'rglob' instead of 'glob' if you want to match names recursively
>>> list(Path('programs').glob('*file.py'))
[PosixPath('programs/read_file.py'), PosixPath('programs/write_file.py')]
</code></pre><p>See <a href=https://miguendes.me/python-pathlib>Python pathlib Cookbook</a>, <a href=https://www.pythonmorsels.com/pathlib-module/>pathlib module tips and tricks</a> and <a href=https://stackoverflow.com/q/10377998/4082052>stackoverflow: How can I iterate over files in a given directory?</a> for more details and examples.<p>There are specialized modules for structured data processing as well, for example:<ul><li><a href=https://docs.python.org/3/library/csv.html>docs.python: csv</a><li><a href=https://docs.python.org/3/library/json.html>docs.python: json</a><li><a href=https://docs.python.org/3/library/xml.html>docs.python: xml</a></ul><h2 id=exercises><a class=header href=#exercises>Exercises</a></h2><ul><li><p>Write a program that reads a known filename <code>f1.txt</code> which contains a single column of numbers. Your task is to display the sum of these numbers, which is <code>10485.14</code> for the given example.</p> <pre><code class=language-bash>$ cat f1.txt 
8
53
3.14
84
73e2
100
2937
</code></pre><li><p>Read the documentation for <code>glob.glob()</code> and write a program to list all files ending with <code>.txt</code> in the current directory as well as sub-directories, recursively.</p></ul></main><nav aria-label="Page navigation"class=nav-wrapper><a aria-label="Previous chapter"class="mobile-nav-chapters previous"title="Previous chapter"aria-keyshortcuts=Left href=comprehensions-and-generator-expressions.html rel=prev> <i class="fa fa-angle-left"></i> </a><a aria-label="Next chapter"class="mobile-nav-chapters next"title="Next chapter"aria-keyshortcuts=Right href=executing-external-commands.html rel=next> <i class="fa fa-angle-right"></i> </a><div style="clear: both"></div></nav></div></div><nav aria-label="Page navigation"class=nav-wide-wrapper><a aria-label="Previous chapter"class="nav-chapters previous"title="Previous chapter"aria-keyshortcuts=Left href=comprehensions-and-generator-expressions.html rel=prev> <i class="fa fa-angle-left"></i> </a><a aria-label="Next chapter"class="nav-chapters next"title="Next chapter"aria-keyshortcuts=Right href=executing-external-commands.html rel=next> <i class="fa fa-angle-right"></i> </a></nav></div><script>window.playground_copyable = true;</script><script charset=utf-8 src=elasticlunr.min.js></script><script charset=utf-8 src=mark.min.js></script><script charset=utf-8 src=searcher.js></script><script charset=utf-8 src=clipboard.min.js></script><script charset=utf-8 src=highlight.js></script><script charset=utf-8 src=book.js></script><script src=sidebar.js></script>